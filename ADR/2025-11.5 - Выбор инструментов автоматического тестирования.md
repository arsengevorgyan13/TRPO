**Дата:** 29 ноября 2025 г.

**Статус:** Принято

**Контекст:**

Для системы управления автопарком, построенной на микросервисной архитектуре с использованием Go для бэкенда, ReactJS для веб-интерфейса, мобильных приложений для водителей и PostgreSQL для хранения данных, необходим эффективный набор инструментов автоматического тестирования. Тестирование должно охватывать все уровни системы: модули бэкенда, интеграцию между сервисами, API, веб-интерфейс для диспетчеров, мобильные приложения для водителей и проверку интеграций с внешними системами (GPS-трекеры).

**Рассмотренные варианты:**

1. **Go testing package** - стандартный пакет тестирования для Go
2. **Testify** - библиотека для расширения возможностей тестирования в Go
3. **Selenium** - для автоматизации тестирования веб-интерфейса
4. **Appium** - для автоматизации тестирования мобильных приложений
5. **REST API тестирование через Go-тесты** - функциональное тестирование API

**Решение:**

Выбран комплекс инструментов: Go testing package с Testify для бэкенда и API-тестирования, Selenium для веб-интерфейса и Appium для мобильных приложений.

**Обоснование:**

- **Go testing package с Testify для бэкенда:** Встроенный пакет testing Go предоставляет все необходимое для модульного, интеграционного и функционального тестирования. Testify расширяет его возможности моками, удобными ассертами и поддержкой тестовых наборов. Это идеально подходит для микросервисов на Go, обеспечивая тестирование бизнес-логики планирования маршрутов, обработки GPS-данных, интеграции с PostGIS и управления расписаниями водителей. Функциональное тестирование API эффективно реализуется через httptest package.

- **Selenium для веб-интерфейса диспетчеров:** Позволяет автоматизировать тестирование сложных интерфейсов на ReactJS, включая работу с картами в реальном времени, планирование маршрутов и мониторинг транспортных средств. Кросс-браузерная поддержка соответствует требованию PLT01, а возможность интеграции с CI/CD обеспечивает непрерывную проверку качества интерфейса.

- **Appium для мобильных приложений водителей:** Поддерживает кроссплатформенное тестирование на iOS и Android, что соответствует требованиям PLT02 и PLT03. Позволяет автоматизировать ключевые сценарии использования: просмотр расписаний и маршрутов, отправку сообщений об инцидентах, работу в условиях нестабильной сети.

**Недостатки решения:**

- **Отсутствие специализированного инструмента для нагрузочного тестирования:** Нет JMeter или аналогичного инструмента, что затрудняет проверку соответствия требованиям производительности PER01-PER04 и масштабируемости SCA01-SCA04.
- **Сложность поддержки нескольких инструментов:** Необходимость одновременной поддержки и интеграции трех различных инструментов тестирования увеличивает операционные затраты и требует разнообразных навыков от команды.
- **Ограниченная поддержка тестирования WebSocket-соединений:** Selenium может иметь ограничения при тестировании real-time функциональности мониторинга, основанной на WebSocket.

**Последствия:**

- Команде разработки бэкенда потребуется освоить лучшие практики тестирования на Go с использованием Testify, включая создание комплексных функциональных тестов API с помощью httptest.
- Для тестирования веб-интерфейса потребуется выделенный ресурс с экспертизой в Selenium и создание стабильных тестовых сценариев для работы с картами и динамическими данными.
- Тестирование мобильных приложений потребует настройки инфраструктуры Appium, включая эмуляторы/симуляторы и реальные устройства, а также разработки тестовых сценариев для ключевых пользовательских сценариев водителей.
- Для нагрузочного тестирования потребуется либо временное привлечение внешних инструментов, либо отдельный этап выделения ресурсов под эту задачу.
- Необходимо обеспечить интеграцию всех инструментов тестирования в единый CI/CD pipeline для автоматического прогона тестов при каждом изменении кода.